<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EVNova MMO Prototype</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="loginOverlay" class="overlay">
      <div class="login-card">
        <h2>Log in to the Hangar</h2>
        <p>Create or resume a pilot to keep your progress saved.</p>
        <form id="loginForm">
          <label for="pilotName">Pilot call sign</label>
          <input id="pilotName" name="pilotName" type="text" placeholder="Nova-1" autocomplete="nickname" required />
          <button type="submit">Enter the Sector</button>
          <p id="loginError" class="error"></p>
        </form>
        <div class="login-hint" id="loginHint"></div>
      </div>
    </div>
    <div class="cockpit">
      <canvas id="flightCanvas" width="640" height="360"></canvas>
      <aside class="hud">
        <div class="hud-header">
          <div>
            <h1>EVNova MMO</h1>
            <p id="systemName">Awaiting login…</p>
          </div>
          <div class="status">
            <span id="pilotNameDisplay"></span>
            <span id="connection">Connecting…</span>
            <span id="credits"></span>
          </div>
        </div>
        <section class="hud-section">
          <h2>Flight</h2>
          <p id="flightStatus">Awaiting login…</p>
          <p id="dockPrompt" class="hud-emphasis"></p>
          <p id="weaponStatus" class="hud-emphasis"></p>
          <p class="hud-hint">
            W/↑ to boost · A/D or ←/→ to turn · Space = primary fire · Shift = secondary fire · L to dock · M
            for map · J to jump
          </p>
        </section>
        <section class="hud-section">
          <h2>Ship Status</h2>
          <div id="shipInfo" class="hud-list"></div>
        </section>
        <section class="hud-section hidden" id="dockedPanel">
          <div class="docked-header">
            <h2>Docked Services</h2>
            <div class="actions">
              <button id="undockBtn">Undock</button>
            </div>
          </div>
          <div id="dockedInfo" class="hud-list"></div>
          <div class="docked-nav">
            <button id="dockedBackBtn" class="docked-back hidden" type="button">← Back to services</button>
          </div>
          <div id="dockedMenu" class="docked-menu">
            <button type="button" data-section="missions" id="dockedMenuMissions">Missions</button>
            <button type="button" data-section="trade" id="dockedMenuTrading">Trading</button>
            <button type="button" data-section="outfitter" id="dockedMenuOutfitter">Outfitter</button>
            <button type="button" data-section="shipyard" id="dockedMenuShipyard">Shipyard</button>
            <button type="button" data-section="bar" id="dockedMenuBar">Bar</button>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="trade">
            <h3>Trade Exchange</h3>
            <div id="cargoSummary" class="hud-list"></div>
            <div id="tradeList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="missions">
            <div class="docked-section-header">
              <h3>Mission BBS</h3>
              <button id="completeBtn" type="button">Complete Missions</button>
            </div>
            <div class="mission-board">
              <div id="missionBoard" class="list mission-list"></div>
              <div id="missionDetail" class="mission-detail">
                <p>Select a mission to review details.</p>
              </div>
            </div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="outfitter">
            <h3>Outfitter</h3>
            <p class="hud-hint">Parts</p>
            <div id="outfitList" class="list"></div>
            <p class="hud-hint">Primary Weapons</p>
            <div id="weaponList" class="list"></div>
            <p class="hud-hint">Secondary Weapons</p>
            <div id="secondaryWeaponList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="shipyard">
            <h3>Shipyard</h3>
            <div id="shipList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="bar">
            <h3>Bar</h3>
            <p class="hud-hint">Local chatter and off-duty pilots fill the room.</p>
            <div class="hud-list">
              <span>Order a drink, hear rumors, or just take in the atmosphere.</span>
            </div>
          </div>
        </section>
        <section class="hud-section">
          <h2>Captain's Log</h2>
          <div id="log" class="log"></div>
        </section>
      </aside>
    </div>
    <div id="mapOverlay" class="overlay hidden map-overlay">
      <div class="map-card">
        <div class="map-header">
          <div>
            <h2>Starmap</h2>
            <p>Plot a route through connected systems, then press J once you're clear of the core.</p>
          </div>
          <button id="closeMapBtn" type="button">Close (M)</button>
        </div>
        <canvas id="mapCanvas" width="720" height="520"></canvas>
        <div class="map-footer">
          <div>
            <h3>Route</h3>
            <ol id="mapRoute" class="map-route"></ol>
          </div>
          <div class="map-actions">
            <p id="mapHint" class="hud-hint">Click systems to add waypoints.</p>
            <button id="clearRouteBtn" type="button">Clear Route</button>
          </div>
        </div>
      </div>
    </div>
    <script src="app.js"></script>
  </body>
</html>
