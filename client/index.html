<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EVNova MMO Prototype</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="loginOverlay" class="overlay">
      <div class="login-card">
        <h2>Log in to the Hangar</h2>
        <p>Create or resume a pilot to keep your progress saved.</p>
        <form id="loginForm">
          <label for="pilotName">Pilot call sign</label>
          <input id="pilotName" name="pilotName" type="text" placeholder="Nova-1" autocomplete="nickname" required />
          <button type="submit">Enter the Sector</button>
          <p id="loginError" class="error"></p>
        </form>
        <div class="login-hint" id="loginHint"></div>
      </div>
    </div>
    <div class="cockpit">
      <canvas id="flightCanvas" width="640" height="360"></canvas>
      <aside class="hud">
        <div class="hud-header">
          <div>
            <h1>EVNova MMO</h1>
            <p id="systemName">Awaiting login…</p>
          </div>
          <div class="status">
            <span id="pilotNameDisplay"></span>
            <span id="connection">Connecting…</span>
            <span id="credits"></span>
          </div>
        </div>
        <section class="hud-section">
          <h2>Tactical Mini Map</h2>
          <canvas id="miniMapCanvas" class="mini-map" width="220" height="220"></canvas>
        </section>
        <section class="hud-section hud-section--split">
          <div>
            <h2>Ship Status</h2>
            <div id="shipInfo" class="hud-list"></div>
          </div>
          <div>
            <h2>Target Lock</h2>
            <div id="targetInfo" class="hud-list"></div>
          </div>
        </section>
        <section class="hud-section">
          <h2>Flight</h2>
          <p id="flightStatus">Awaiting login…</p>
          <p id="dockPrompt" class="hud-emphasis"></p>
          <p id="weaponStatus" class="hud-emphasis"></p>
          <p id="secondaryStatus" class="hud-emphasis"></p>
          <p class="hud-hint">
            Controls: ↑ boost · A/D turn · Space fire · Shift secondary · Tab target · R lock · L dock · M map · I log ·
            Y comms
          </p>
        </section>
        <section class="hud-section hidden" id="dockedPanel">
          <div class="docked-header">
            <h2>Docked Services</h2>
            <div class="actions">
              <button id="undockBtn">Undock</button>
            </div>
          </div>
          <div id="dockedInfo" class="hud-list"></div>
          <div class="docked-nav">
            <button id="dockedBackBtn" class="docked-back hidden" type="button">← Back to services</button>
          </div>
          <div id="dockedMenu" class="docked-menu">
            <button type="button" data-section="missions" id="dockedMenuMissions">Missions</button>
            <button type="button" data-section="trade" id="dockedMenuTrading">Trading</button>
            <button type="button" data-section="outfitter" id="dockedMenuOutfitter">Outfitter</button>
            <button type="button" data-section="shipyard" id="dockedMenuShipyard">Shipyard</button>
            <button type="button" data-section="bar" id="dockedMenuBar">Bar</button>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="trade">
            <h3>Trade Exchange</h3>
            <div id="cargoSummary" class="hud-list"></div>
            <div id="tradeList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="missions">
            <div class="docked-section-header">
              <h3>Mission BBS</h3>
              <button id="completeBtn" type="button">Complete Missions</button>
            </div>
            <div class="mission-board">
              <div id="missionBoard" class="list mission-list"></div>
              <div id="missionDetail" class="mission-detail">
                <p>Select a mission to review details.</p>
              </div>
            </div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="outfitter">
            <h3>Outfitter</h3>
            <p class="hud-hint">Parts</p>
            <div id="outfitList" class="list"></div>
            <p class="hud-hint">Primary Weapons</p>
            <div id="weaponList" class="list"></div>
            <p class="hud-hint">Secondary Weapons</p>
            <div id="secondaryWeaponList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="shipyard">
            <h3>Shipyard</h3>
            <div id="shipList" class="list"></div>
          </div>
          <div class="hud-subsection docked-section hidden" data-section="bar">
            <h3>Bar</h3>
            <p class="hud-hint">Local chatter and off-duty pilots fill the room.</p>
            <div class="hud-list">
              <span>Order a drink, hear rumors, or just take in the atmosphere.</span>
            </div>
            <div class="hud-list">
              <span>House games run nightly with low odds and quick payouts.</span>
              <button id="barGambleBtn" type="button">Gamble (±4,000)</button>
            </div>
            <p class="hud-hint">Escort contracts</p>
            <div id="barEscortList" class="list"></div>
            <p class="hud-hint">Active escorts</p>
            <div id="barEscortRoster" class="list"></div>
          </div>
        </section>
        <section class="hud-section">
          <h2>Recent Events</h2>
          <div id="log" class="log"></div>
        </section>
      </aside>
    </div>
    <div id="mapOverlay" class="overlay hidden map-overlay">
      <div class="map-card">
        <div class="map-header">
          <div>
            <h2>Starmap</h2>
            <p>Plot a route through connected systems, then press J once you're clear of the core.</p>
          </div>
          <button id="closeMapBtn" type="button">Close (M)</button>
        </div>
        <canvas id="mapCanvas" width="720" height="520"></canvas>
        <div class="map-footer">
          <div>
            <h3>Route</h3>
            <ol id="mapRoute" class="map-route"></ol>
          </div>
          <div class="map-actions">
            <p id="mapHint" class="hud-hint">Click systems to add waypoints.</p>
            <button id="clearRouteBtn" type="button">Clear Route</button>
          </div>
        </div>
      </div>
    </div>
    <div id="missionLogOverlay" class="overlay hidden mission-log-overlay">
      <div class="mission-log-card">
        <div class="mission-log-header">
          <div>
            <h2>Active Mission Log</h2>
            <p>Accepted contracts and payouts.</p>
          </div>
          <button id="closeMissionLogBtn" type="button">Close (I)</button>
        </div>
        <div class="mission-log-section">
          <h3>Escort Roster</h3>
          <div id="missionLogEscortList" class="list"></div>
        </div>
        <div class="mission-log-section">
          <h3>Active Missions</h3>
          <div id="missionLogList" class="list"></div>
        </div>
      </div>
    </div>
    <div id="commsOverlay" class="overlay hidden comms-overlay">
      <div class="comms-card">
        <div class="comms-header">
          <div>
            <h2 id="commsTargetName">Open Channel</h2>
            <p id="commsTargetHint" class="hud-hint"></p>
          </div>
          <button id="closeCommsBtn" type="button">Close (Y)</button>
        </div>
        <div id="commsLog" class="list"></div>
        <div class="comms-input">
          <input id="commsInput" type="text" placeholder="Type a message..." autocomplete="off" />
          <button id="commsSendBtn" type="button">Send</button>
        </div>
      </div>
    </div>
    <div id="boardingOverlay" class="overlay hidden boarding-overlay">
      <div class="boarding-card">
        <div class="boarding-header">
          <div>
            <h2>Boarding Action</h2>
            <p id="boardingTargetName" class="hud-hint"></p>
          </div>
          <button id="boardingCloseBtn" type="button">Close</button>
        </div>
        <div id="boardingStatus" class="hud-hint"></div>
        <div id="boardingInfo" class="hud-list"></div>
        <div id="boardingCargo" class="list"></div>
        <div class="boarding-actions">
          <button id="boardingStealCreditsBtn" type="button">Steal Credits</button>
          <button id="boardingStealCargoBtn" type="button">Steal Cargo</button>
          <button id="boardingTakeoverBtn" type="button">Capture & Take Over</button>
          <button id="boardingEscortBtn" type="button">Capture & Escort</button>
        </div>
      </div>
    </div>
    <script src="app.js"></script>
  </body>
</html>
